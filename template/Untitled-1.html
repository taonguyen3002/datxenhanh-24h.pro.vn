<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Here Maps Autosuggest Example</title>
    <style>
      #suggestions {
        border: 1px solid #ccc;
        max-width: 300px;
        position: absolute;
        background: white;
        z-index: 1000;
      }

      #suggestions ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
      }

      #suggestions li {
        padding: 8px;
        cursor: pointer;
        border-bottom: 1px solid #ddd;
      }

      #suggestions li:hover {
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <input
      type="text"
      id="search"
      placeholder="Nhập địa chỉ"
      onkeyup="autoComplete(this.value)"
      autocomplete="off"
      style="width: 300px"
    />
    <div id="suggestions"></div>

    <script>
      const apiKey = "FGMbR5puL9cb_9_3Q9IeeXwz_jyd_us2ZtAGlUZvwr8"; // Thay YOUR_API_KEY bằng API Key của bạn

      function autoComplete(query) {
        const apiUrl = `https://autosuggest.search.hereapi.com/v1/autosuggest?q=${query}&at=21.0285,105.8542&limit=5&apiKey=${apiKey}`;

        if (query.length < 3) {
          document.getElementById("suggestions").innerHTML = "";
          return;
        }

        fetch(apiUrl)
          .then((response) => response.json())
          .then((data) => {
            let suggestionsList = "<ul>";
            console.log(data);

            data.items.forEach((item) => {
              suggestionsList += `<li onclick="selectAddress('${item.title}')">${item.title}</li>`;
            });
            suggestionsList += "</ul>";
            document.getElementById("suggestions").innerHTML = suggestionsList;
          })
          .catch((error) => console.error("Error:", error));
      }

      function selectAddress(address) {
        document.getElementById("search").value = address;
        document.getElementById("suggestions").innerHTML = ""; // Xóa gợi ý sau khi chọn
      }
    </script>
  </body>
</html>
